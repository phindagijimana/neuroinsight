# Desktop v1.3.14 â€“ Windows Docker User Fix

**Release Date:** November 12, 2025  
**Build Tag:** `desktop-v1.3.14`  
**Status:** Hotfix (supersedes v1.3.13 artifacts)

---

## ğŸ› Bug Fixed

### FastSurfer Docker failed on Windows with `unable to find user nonroot`

- **Symptoms:** Jobs progressed to 20â€¯% and then failed with exit status `125`. Logs showed:
  ```
  docker: Error response from daemon: unable to find user nonroot: no matching entries in passwd file
  ```
- **Cause:** The FastSurfer container defaults to the `nonroot` user. On Windows, that user lacks permission to access NTFS-mounted host paths, so Docker exited before segmentation began.
- **Fix:** When running in desktop mode on Windows, we now append `--user root` to the `docker run` command so the container can read/write the mounted directories.

---

## ğŸ“¦ Files Changed

1. `desktop_alone/pipeline/processors/mri_processor.py`
   - Added platform detection and `--user root` override for Windows desktop runs.
   - Removed redundant in-function platform imports (now handled at module level).
2. `desktop_alone/electron-app/package.json`
   - Version bump: `1.3.13` â†’ `1.3.14`.
3. `desktop_alone/V1.3.14_WINDOWS_DOCKER_USER_FIX.md`
   - This document.

---

## âœ… Impact

- Windows desktop builds now run the real FastSurfer segmentation end-to-end without falling back to mock data.
- macOS/Linux behaviour unchanged (still runs as default container user).
- Visualizations and metrics are populated as expected once Docker completes.

---

## ğŸ”„ Upgrade Guidance

1. Uninstall any previous NeuroInsight Desktop build.
2. Delete `%LOCALAPPDATA%\Programs\NeuroInsight` if remnants remain.
3. Install the GitHub Actions artifact named `NeuroInsight Setup 1.3.14.exe`.
4. Verify backend binary timestamp matches the latest build:
   ```powershell
   Get-Item "$env:LOCALAPPDATA\Programs\NeuroInsight\resources\backend\neuroinsight-backend.exe" |
       Select-Object LastWriteTime, Length
   ```
5. Launch the app, upload a scan, confirm the job passes 20â€¯% and reaches 100â€¯% with populated metrics and overlays.

---

## ğŸ§ª Testing

- âœ… Windows 11, Docker Desktop 4.32: FastSurfer segmentation completes, outputs generated, metrics saved.
- âœ… macOS Sonoma (Intel), Docker Desktop 4.32: regression-tested, continues to work (no user override applied).
- âœ… Linux Ubuntu 22.04: unaffected.

---

Happy segmenting! ğŸ§ ğŸ‰




